<!DOCTYPE html>
<html>
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      margin: 0;
      background-color: #111;
      font-family: 'Segoe UI', sans-serif;
      overflow: hidden;
      user-select: none;
    }

    #gameArea {
      position: relative;
      width: 100%;
      height: 100vh;
      background: linear-gradient(120deg, #0f2027, #203a43, #2c5364);
      background-size: 400% 400%;
      animation: gradientFlow 10s ease infinite;
      overflow: hidden;
    }

    @keyframes gradientFlow {
      0% {background-position: 0% 50%;}
      50% {background-position: 100% 50%;}
      100% {background-position: 0% 50%;}
    }

    .note {
      position: absolute;
      width: 100px;
      height: 40px;
      background: #00ffff;
      left: 50%;
      transform: translateX(-50%);
      border-radius: 10px;
      box-shadow: 0 0 10px #00ffff88;
    }

    #hitZone {
      position: absolute;
      bottom: 80px;
      left: 50%;
      transform: translateX(-50%);
      width: 180px;
      height: 50px;
      background-color: #ff4444;
      border-radius: 25px;
      box-shadow: 0 0 20px #ff4444aa;
      border: 3px solid white;
      transition: transform 0.1s ease;
    }

    #hitZone:active {
      transform: translateX(-50%) scale(0.95);
    }

    #scoreDisplay {
      position: absolute;
      top: 20px;
      left: 20px;
      font-size: 28px;
      font-weight: bold;
      color: white;
      text-shadow: 1px 1px 5px black;
    }

    #feedback {
      position: absolute;
      bottom: 150px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 36px;
      color: yellow;
      font-weight: bold;
      opacity: 0;
      transition: opacity 0.2s;
      text-shadow: 0 0 10px black;
    }

    #tapText {
      position: absolute;
      bottom: 45px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 22px;
      color: white;
      text-shadow: 0 0 5px #000;
      opacity: 0.75;
    }

    #title {
      position: absolute;
      top: 20px;
      right: 20px;
      font-size: 24px;
      color: #ddd;
      opacity: 0.9;
    }
  </style>
</head>
<body>

<div id="gameArea">
  <div id="title">🎵 Tap Tap Mini</div>
  <div id="scoreDisplay">Score: 0</div>
  <div id="hitZone"></div>
  <div id="feedback"></div>
  <div id="tapText">Tap here when it's in the red!</div>
</div>

<script>
  const gameArea = document.getElementById("gameArea");
  const hitZone = document.getElementById("hitZone");
  const scoreDisplay = document.getElementById("scoreDisplay");
  const feedback = document.getElementById("feedback");

  let score = 0;
  let notes = [];

  function spawnNote() {
    const note = document.createElement("div");
    note.classList.add("note");
    note.style.top = "-40px";
    gameArea.appendChild(note);

    const noteObj = {
      el: note,
      y: -40,
      speed: 3.5,
      hit: false
    };

    notes.push(noteObj);
  }

  function updateNotes() {
    for (let i = notes.length - 1; i >= 0; i--) {
      const note = notes[i];
      note.y += note.speed;
      note.el.style.top = note.y + "px";

      if (note.y > window.innerHeight) {
        if (!note.hit) showFeedback("Miss ❌");
        note.el.remove();
        notes.splice(i, 1);
      }
    }
  }

  function showFeedback(text) {
    feedback.textContent = text;
    feedback.style.opacity = 1;
    setTimeout(() => {
      feedback.style.opacity = 0;
    }, 500);
  }

  function checkHit() {
    for (let i = 0; i < notes.length; i++) {
      const note = notes[i];
      const noteCenter = note.y + 20;
      const zoneTop = hitZone.offsetTop;
      const zoneBottom = zoneTop + hitZone.offsetHeight;

      if (!note.hit && noteCenter >= zoneTop && noteCenter <= zoneBottom) {
        note.hit = true;
        note.el.remove();
        notes.splice(i, 1);

        const distance = Math.abs(noteCenter - (zoneTop + hitZone.offsetHeight / 2));
        if (distance < 5) {
          score += 100;
          showFeedback("Perfect 💯");
        } else if (distance < 20) {
          score += 50;
          showFeedback("Good 👍");
        } else {
          score += 20;
          showFeedback("Okay 👌");
        }

        scoreDisplay.textContent = "Score: " + score;
        return;
      }
    }

    showFeedback("Miss ❌");
  }

  document.addEventListener("keydown", (e) => {
    if (e.code === "Space") {
      checkHit();
    }
  });

  document.addEventListener("click", () => {
    checkHit();
  });

  // Game loop
  function gameLoop() {
    updateNotes();
    requestAnimationFrame(gameLoop);
  }

  // Start game
  setInterval(spawnNote, 1200);
  gameLoop();
</script>

</body>
</html>
